{% extends 'base.html.twig' %}

{% block body %}





    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Dashboard</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Dashboard</li>
                </ol>
            </nav>
        </div><!-- End Page Title -->

        <section class="section dashboard">
            <div class="row">

                <!-- Left side columns -->
                <div class="col-lg-8">
                    <div class="row">

                        <!-- Sales Card -->
                        <div class="col-xxl-4 col-md-6">
                            <div class="card info-card sales-card">

                                <div class="filter">
                                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                        <li class="dropdown-header text-start">
                                            <h6>Filter</h6>
                                        </li>

                                        <li><a class="dropdown-item" href="#">Today</a></li>
                                        <li><a class="dropdown-item" href="#">This Month</a></li>
                                        <li><a class="dropdown-item" href="#">This Year</a></li>
                                    </ul>
                                </div>

                                <div class="card-body">
                                    <h5 class="card-title">Money Spent on SkillHub <span>| Today</span></h5>

                                    <div class="d-flex align-items-center">
                                        <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                            <i class="bi bi-cart"></i>
                                        </div>
                                        <div class="ps-3">
                                            <h6>145</h6>
                                            <span class="text-success small pt-1 fw-bold">12%</span> <span class="text-muted small pt-2 ps-1">increase</span>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div><!-- End Sales Card -->

                        <!-- Revenue Card -->
                    
                        <!-- Customers Card -->
                        <div class="col-xxl-4 col-xl-12">

                            <div class="card info-card customers-card">

                                <div class="filter">
                                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                        <li class="dropdown-header text-start">
                                            <h6>Filter</h6>
                                        </li>

                                        <li><a class="dropdown-item" href="#">Today</a></li>
                                        <li><a class="dropdown-item" href="#">This Month</a></li>
                                        <li><a class="dropdown-item" href="#">This Year</a></li>
                                    </ul>
                                </div>

                                <div class="card-body">
                                    <h5 class="card-title">Customers <span>| This Year</span></h5>

                                    <div class="d-flex align-items-center">
                                        <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                            <i class="bi bi-people"></i>
                                        </div>
                                        <div class="ps-3">
                                            <h6>1244</h6>
                                            <span class="text-danger small pt-1 fw-bold">12%</span> <span class="text-muted small pt-2 ps-1">decrease</span>

                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div><!-- End Customers Card -->

                        <!-- Reports -->
                        <div class="col-12">
                           
                        </div><!-- End Reports -->

                        <!-- Recent Sales -->
                        <div class="col-12">
                            <div class="card recent-sales overflow-auto">

                                <div class="filter">
                                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                        <li class="dropdown-header text-start">
                                            <h6>Filter</h6>
                                        </li>

                                        <li><a class="dropdown-item" href="#">Today</a></li>
                                        <li><a class="dropdown-item" href="#">This Month</a></li>
                                        <li><a class="dropdown-item" href="#">This Year</a></li>
                                    </ul>
                                </div>

                                <div class="card-body">
                                    <h5 class="card-title">Users Joined today  <span>| Today</span></h5>

                                    <table class="table table-borderless datatable">
                                        <thead>
                                             <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Username</th>
                                                <th scope="col">Email</th>
                                                <th scope="col">Role</th>
                                                <th scope="col">Status</th>
                                            </tr>
                                        </thead>
                                     <tbody>
    {% for user in users %}
        <tr>
            <th scope="row"><a href="#">{{ user.id }}</a></th>
            <td>{{ user.FirstName }}</td>
            <td><a href="#" class="text-primary">{{ user.email }}</a></td>
{% if 'ROLE_ADMIN' in user.roles %}
    <td>Admin</td>
{% elseif 'ROLE_FREELANCER' in user.roles %}
    <td>Freelancer</td>
{% elseif 'ROLE_CLIENT' in user.roles %}
    <td>Client</td>
{% else %}
    <td>User</td>
{% endif %}
            <td>
                    <span class="badge bg-success">Active</span>
             
            </td>
        </tr>
    {% endfor %}
</tbody>

                                    </table>

                                </div>

                            </div>
                        </div><!-- End Recent Sales -->

                        <!-- Top Selling -->
                        <div class="col-12">
                            <div class="card top-selling overflow-auto">

                                <div class="filter">
                                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                                        <li class="dropdown-header text-start">
                                            <h6>Filter</h6>
                                        </li>

                                        <li><a class="dropdown-item" href="#">Today</a></li>
                                        <li><a class="dropdown-item" href="#">This Month</a></li>
                                        <li><a class="dropdown-item" href="#">This Year</a></li>
                                    </ul>
                                </div>

                                <div class="card-body pb-0">
                                    <h5 class="card-title">Top Client <span>| Today</span></h5>

                                  <table class="table table-borderless">
    <thead>
        <tr>
            <th scope="col">Title</th>
            <th scope="col">Budget Estimate</th>
            <th scope="col">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for postedJob in postedJobs %}
            <tr>
                <th scope="row">
                </th>
                <td><a href="#" class="text-primary fw-bold">{{ postedJob.title }}</a></td>
                <td>${{ postedJob.budgetEstimate }}</td>
                <td>                    <span class="badge bg-success">Active</span>
</td>
            </tr>
        {% endfor %}
    </tbody>
</table>


                                </div>

                            </div>
                        </div><!-- End Top Selling -->
<div class="card">
    <div class="card-body">
        <h5 class="card-title">Bar Chart</h5>

        <!-- Bar Chart -->
        <canvas id="barChart" style="max-height: 400px; display: block; box-sizing: border-box; height: 400px; width: 876px;" width="1096" height="500"></canvas>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                new Chart(document.querySelector('#barChart'), {
                    type: 'bar',
                    data: {
                        labels: [
                            {% for postedJob in postedJobs %}
                                '{{ postedJob.title }}',
                            {% endfor %}
                        ],
                        datasets: [{
                            label: 'Bar Chart',
                            data: [
                                {% for postedJob in postedJobs %}
                                    {{ postedJob.budgetEstimate }},
                                {% endfor %}
                            ],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(255, 159, 64, 0.2)',
                                'rgba(255, 205, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(201, 203, 207, 0.2)'
                            ],
                            borderColor: [
                                'rgb(255, 99, 132)',
                                'rgb(255, 159, 64)',
                                'rgb(255, 205, 86)',
                                'rgb(75, 192, 192)',
                                'rgb(54, 162, 235)',
                                'rgb(153, 102, 255)',
                                'rgb(201, 203, 207)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            });
        </script>
        <!-- End Bar Chart -->
    </div>
</div>

                    </div>
                </div><!-- End Left side columns -->

                <!-- Right side columns -->
                <div class="col-lg-4">

    
                   <div class="card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

           <div class="card-body">
    <h5 class="card-title">Recent Activity <span>| Today</span></h5>

    <div class="activity">
        {% for contrat in contrats %}
            <div class="activity-item d-flex">
                <div class="activite-label">{{ contrat.date_creation|date('H:i') }}</div>
                <i class="bi bi-circle-fill activity-badge {% if contrat.statut == 'Active' %}text-success{% elseif contrat.statut == 'Inactive' %}text-danger{% else %}text-primary{% endif %} align-self-start"></i>
                <div class="activity-content">
                    <p>Description: {{ contrat.description }}</p>
                    <p>Project: <a href="#" class="fw-bold text-dark">{{ contrat.projet }}</a></p>
                    <p>Freelancer: {{ contrat.freelancer }}</p>
                    <!-- Add any other details you want to display -->
                </div>
            </div><!-- End activity item-->
        {% endfor %}
    </div>

</div>



          </div>

                    
                </div><!-- End Right side columns -->

            </div>
        </section>

    </main><!-- End #main -->


{% endblock %}
